<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pulsecore</title>
    <link rel="stylesheet" href="public/style.css">
</head>
<body>
    <button id="menuToggle">Menu</button>
    <div id="slideMenu">
    <div id="controls">
        <button id="startBtn">Start</button>
        <button id="stopBtn" disabled>Stop</button>
        <button id="clearBtn">Clear</button>
        <label>Pulse Length: <input type="range" id="speedSlider" min="50" max="1000" step="50" value="500"></label>
        <label>Fold Threshold:
            <span id="foldValue">2</span>
            <input type="range" id="foldSlider" min="0" max="10" step="1" value="2">
        </label>
        <label>Zoom: <input type="range" id="zoomSlider" min="1" max="50" step="1" value="10"></label>
        <div id="pulseCounterDisplay">Pulse: <span id="pulseCounter">0</span></div>
        <button id="reverseBtn">Reverse</button>
        <label>Neighbor Count:
            <span id="neighborValue">2</span>
            <input type="range" id="neighborSlider" min="0" max="8" step="1" value="2">
        </label>
        <label><input type="checkbox" id="debugOverlay"> Debug Overlay</label>
        <label><input type="checkbox" id="pulseFlash"> Pulse Flash</label>
        <label><input type="checkbox" id="gridLinesToggle" checked> Grid Lines</label>
    </div>

    <div id="tools">
        <label>Tool:
            <select id="toolSelect">
                <option value="brush">Brush</option>
                <option value="eraser">Eraser</option>
                <option value="pulse">Pulse Injector</option>
                <option value="stamper">Pattern Stamper</option>
            </select>
        </label>
        <label>Color: <input type="color" id="colorPicker" value="#00ff00"></label>
        <label id="pulseLengthLabel">Injector Length: <input type="number" id="pulseLength" min="1" value="4"></label>
        <label id="patternLabel">Pattern:
            <select id="patternSelect"></select>
        </label>
    </div>

    <div id="patternSaver">
        <input type="text" id="patternName" placeholder="Pattern Name">
        <button onclick="saveCurrentPattern()">ðŸ’¾ Save Pattern</button>
        <input type="file" id="patternLoader" accept=".json" onchange="handlePatternSelection(this)">
        <button id="patternUploadBtn" onclick="uploadPattern()" style="display:none">Upload Pattern</button>
    </div>

    <div id="aboutInfo" class="infoSection">
        <h2>About Pulse-Core</h2>
        <p>Pulse-Core is a browser-based sandbox for experimenting with a simple pulse simulation. Cells flip on and off based on neighbor counts and optional folding logic. Draw patterns, inject pulses and watch the results in real time.</p>
        <ul>
            <li>Dynamic grid adapts with the zoom slider (capped at 500Ã—500 cells).</li>
            <li>Start/Stop controls with reverse stepping.</li>
            <li>Adjust pulse length, folding threshold and neighbor count while running.</li>
            <li>Brush, eraser, pulse injector and pattern stamper tools.</li>
            <li>Color picker and optional flash effect.</li>
            <li>Save patterns as JSON and reload them later.</li>
            <li>Toggle debug numbers and grid lines.</li>
        </ul>
    </div>

    <div id="usageInfo" class="infoSection">
        <h2>How to Use</h2>
        <ol>
            <li>Open <code>index.html</code> in your browser.</li>
            <li>Select a tool from the <strong>Tool</strong> dropdown and draw on the grid.</li>
            <li>Press <strong>Start</strong> to animate the pattern and tweak the sliders as it runs.</li>
            <li>Use <strong>Save Pattern</strong> to download your design or <strong>Upload Pattern</strong> to load a saved file.</li>
            <li>The <strong>Reverse</strong> button steps backward through previous pulses.</li>
        </ol>
        <p>Once loaded, the tool works entirely offline.</p>
    </div>
    </div>
    <canvas id="grid"></canvas>

    <script src="public/app.js"></script>
</body>
</html>
